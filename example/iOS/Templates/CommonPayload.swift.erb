import Foundation

// This file is automatically generated by generate-log-classes.
public struct CommonPayload {
    <%- columns.each do |column| -%>
    <%- column.descriptions.flat_map(&:lines).each do |description_line| -%>
    /// <%= description_line.strip %>
    <%- end -%>
    var <%= column.variable_name %>: <%= column.swift_type %>
    <%- end -%>

    public func makePayload() -> [String: JSONCodable] {
        return [
            <%- columns.each do |column| -%>
            "<%= column.original_name %>": <%= column.call_dump %>,
            <%- end -%>
        ].compactMapValues { $0 }
    }

    public init(<%= columns.map { |column| column.as_argument }.join(', ') -%>) {
        <%- columns.each do |column| -%>
        self.<%= column.variable_name %> = <%= column.variable_name %>
        <%- end -%>
    }
}
